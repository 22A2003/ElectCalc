<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>é›»æ°—æ©Ÿå™¨ã®å®‰å…¨ãªä½¿ã„æ–¹</title>
  <style>
    body {
      font-family: "Segoe UI", Arial, sans-serif;
      max-width: 900px;
      margin: 2rem auto;
      padding: 1rem;
      background-color: #f7f9fa;
      line-height: 1.6;
    }

    h1 { text-align: center; }

    section {
      background: #fff;
      padding: 1.5rem;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      margin-bottom: 2rem;
    }

    .example-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      margin-bottom: 0.8rem;
    }

    .example-item img {
      width: 75px;
      border-radius: 8px;
      border: 1px solid #ccc;
      background: white;
      padding: 4px;
    }

    .device, .total-input {
      display: grid;
      grid-template-columns: 80px 1fr 1fr 1fr;
      gap: 0.5rem;
      align-items: center;
      margin-bottom: 0.5rem;
      padding: 0.5rem;
      background: #fefefe;
      border: 1px solid #ddd;
      border-radius: 8px;
    }

    .device img {
      width: 70px;
      border-radius: 6px;
      border: 1px solid #ccc;
      background: white;
      padding: 3px;
    }

    .header {
      font-weight: bold;
      text-align: center;
      background: #f3f4f6;
      border-radius: 6px;
    }

    input, select {
      text-align: center;
      padding: 0.35rem;
      border-radius: 6px;
      border: 1px solid #aaa;
      font-size: 1rem;
    }

    button {
      padding: 0.6rem 1.2rem;
      margin-right: 0.5rem;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      font-size: 1rem;
    }

    .blue { background-color: #3b82f6; color: white; }
    .gray { background-color: #e5e7eb; }
    .shadow { box-shadow: 2px 2px 5px rgba(0,0,0,0.2); }
    .text-green { color: green; font-weight: bold; }
    .text-red { color: red; font-weight: bold; }
  </style>
</head>

<body>
  <h1>é›»æ°—æ©Ÿå™¨ã®å®‰å…¨ãªä½¿ã„æ–¹</h1>

  <!-- ================== ä¾‹é¡Œ ================== -->
  <section>
    <h2>ğŸ“˜ ä¾‹é¡Œ</h2>
<p>æ¬¡ã®æ©Ÿå™¨ã‚’ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã«æ¥ç¶šã—ãŸã¨ãã€å®‰å…¨ãªä½¿ã„æ–¹ãªã®ã‹èª¿ã¹ã¾ã—ã‚‡ã†ã€‚</p>
<p>â€»ãªãŠã€ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã®å®šæ ¼é›»æµãŒ15A,ä¾›çµ¦ã•ã‚Œã‚‹é›»åœ§ã¯100Vã§ã™ã€‚</p>
    <div class="example-item">
      <img src="hair_drier.png" alt="ãƒ‰ãƒ©ã‚¤ãƒ¤">
      <span>ãƒ‰ãƒ©ã‚¤ãƒ¤ï¼š1200W</span>
    </div>

    <div class="example-item">
      <img src="smartphone_juuden.png" alt="ã‚¹ãƒãƒ›å……é›»å™¨">
      <span>ã‚¹ãƒãƒ›å……é›»å™¨ï¼š20W</span>
    </div>

    <p>
      ã€è¨ˆç®—ã®ã—ã‹ãŸã€‘<br>
      ãƒ‰ãƒ©ã‚¤ãƒ¤ï¼š1200W Ã· 100V ï¼ <strong>12A</strong><br>
      ã‚¹ãƒãƒ›å……é›»å™¨ï¼š20W Ã· 100V ï¼ <strong>0.20A</strong><br>
      åˆè¨ˆé›»æµï¼12A ï¼‹ 0.20A ï¼ <strong>12.20A</strong>
    </p>

    <p class="text-green">âœ” å®šæ ¼é›»æµå†…ã ã‹ã‚‰å®‰å…¨ãªä½¿ã„æ–¹</p>
  </section>

  <!-- ================== ç·´ç¿’å•é¡Œ1 ================== -->
  <section>
    <h2>âœ ç·´ç¿’å•é¡Œ1ï¼ˆ2ã¤ã®å®¶é›»ï¼‰</h2>
    <p><strong>â€» ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã®å®šæ ¼é›»æµãŒ15A,ä¾›çµ¦ã•ã‚Œã‚‹é›»åœ§ã¯100Vã§ã™ã€‚</strong></p>

    <div class="header device">
      <div>ç”»åƒ</div><div>æ©Ÿå™¨å</div><div>æ¶ˆè²»é›»åŠ›(W)</div><div>é›»æµ(A)</div>
    </div>

    <div class="device">
      <img id="dev1-img" src="cooking_microwave.png">
      <div id="dev1-name">é›»å­ãƒ¬ãƒ³ã‚¸</div>
      <div id="dev1-watt">1000</div>
      <input type="number" id="dev1-current" step="0.01">
    </div>

    <div class="device">
      <img id="dev2-img" src="kaden_tv_wide_frame.png">
      <div id="dev2-name">ãƒ†ãƒ¬ãƒ“</div>
      <div id="dev2-watt">150</div>
      <input type="number" id="dev2-current" step="0.01">
    </div>

    <div class="total-input">
      <div></div>
      <div class="header" style="grid-column: span 2; text-align:right;">åˆè¨ˆé›»æµ(A)</div>
      <input type="number" id="total-current" step="0.01">
    </div>

    <div style="margin-top:0.5rem;">
      <label>å®‰å…¨æ€§ã®åˆ¤æ–­ï¼š
        <select id="safe1">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="safe">å®‰å…¨ãªä½¿ã„æ–¹</option>
          <option value="danger">å±é™ºãªä½¿ã„æ–¹</option>
        </select>
      </label>
    </div>

    <button class="blue shadow" onclick="grade1()">æ¡ç‚¹ã™ã‚‹</button>
    <button class="gray shadow" onclick="regenerate1()">å•é¡Œã‚’æ›´æ–°</button>

    <p id="score1" style="font-weight:bold;"></p>
    <div id="answer1" style="margin-top:1rem;"></div>
  </section>

  <!-- ================== ç·´ç¿’å•é¡Œ2 ================== -->
  <section>
    <h2>âœ ç·´ç¿’å•é¡Œ2ï¼ˆ3ã¤ã®å®¶é›»ï¼‰</h2>
    <p><strong>æ¬¡ã®3ã¤ã®å®¶é›»ã‚’åŒæ™‚ã«ä½¿ã£ãŸã¨ãã€å®‰å…¨ãªä½¿ã„æ–¹ãªã®ã‹èª¿ã¹ã¾ã—ã‚‡ã†ã€‚</strong></p>
    <p>ãƒ†ãƒ¼ãƒ–ãƒ«ã‚¿ãƒƒãƒ—ã®å®šæ ¼é›»æµãŒ15A,ä¾›çµ¦ã•ã‚Œã‚‹é›»åœ§ã¯100Vã§ã™ã€‚</strong></p>

    <div class="header device">
      <div>ç”»åƒ</div><div>æ©Ÿå™¨å</div><div>æ¶ˆè²»é›»åŠ›(W)</div><div>é›»æµ(A)</div>
    </div>

    <div id="dev-area2"></div>

    <div class="total-input">
      <div></div>
      <div class="header" style="grid-column: span 2; text-align:right;">åˆè¨ˆé›»æµ(A)</div>
      <input type="number" id="total-current2" step="0.01">
    </div>

    <div style="margin-top:0.5rem;">
      <label>å®‰å…¨æ€§ã®åˆ¤æ–­ï¼š
        <select id="safe2">
          <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
          <option value="safe">å®‰å…¨ãªä½¿ã„æ–¹</option>
          <option value="danger">å±é™ºãªä½¿ã„æ–¹</option>
        </select>
      </label>
    </div>

    <button class="blue shadow" onclick="grade2()">æ¡ç‚¹ã™ã‚‹</button>
    <button class="gray shadow" onclick="regenerate2()">å•é¡Œã‚’æ›´æ–°</button>

    <p id="score2" style="font-weight:bold; margin-top:1rem;"></p>
    <div id="answer2" style="margin-top:1rem;"></div>
  </section>

  <!-- ================== JavaScript ================== -->
  <script>
    const VOLTAGE = 100;
    const SAFE_LIMIT = 15;

    const deviceImages = {
      "é›»å­ãƒ¬ãƒ³ã‚¸": "cooking_microwave.png",
      "ãƒ†ãƒ¬ãƒ“": "kaden_tv_wide_frame.png",
      "ç‚Šé£¯å™¨": "cooking_suihanki.png",
      "ãƒãƒƒãƒˆ": "cooking_denki_pot.png",
      "PC": "kaden_laptop.png",
      "ã‚²ãƒ¼ãƒ æ©Ÿ": "portable_game.png",
      "ã‚¹ãƒãƒ›å……é›»å™¨": "smartphone_juuden.png",
      "ãƒ©ã‚¸ã‚ª": "rajio.jpg",
      "å†·è”µåº«": "reizoukojpg.jpg",
      "æ‰‡é¢¨æ©Ÿ": "sennpuuki.jpg"
    };

    const allDevices = [
      { name: "é›»å­ãƒ¬ãƒ³ã‚¸", watt: 1000 },
      { name: "ãƒ†ãƒ¬ãƒ“", watt: 150 },
      { name: "ç‚Šé£¯å™¨", watt: 700 },
      { name: "ãƒãƒƒãƒˆ", watt: 800 },
      { name: "PC", watt: 200 },
      { name: "ã‚²ãƒ¼ãƒ æ©Ÿ", watt: 120 },
      { name: "ã‚¹ãƒãƒ›å……é›»å™¨", watt: 20 },
      { name: "ãƒ©ã‚¸ã‚ª", watt: 40 },
      { name: "å†·è”µåº«", watt: 150 },
      { name: "æ‰‡é¢¨æ©Ÿ", watt: 60 }
    ];

    // ========= ç·´ç¿’å•é¡Œ1 =========
    function regenerate1() {
      const devices = [...allDevices].sort(() => Math.random() - 0.5).slice(0, 2);
      document.getElementById("dev1-name").innerText = devices[0].name;
      document.getElementById("dev1-watt").innerText = devices[0].watt;
      document.getElementById("dev1-img").src = deviceImages[devices[0].name];
      document.getElementById("dev2-name").innerText = devices[1].name;
      document.getElementById("dev2-watt").innerText = devices[1].watt;
      document.getElementById("dev2-img").src = deviceImages[devices[1].name];
      ["dev1-current","dev2-current","total-current"].forEach(id => document.getElementById(id).value = "");
      document.getElementById("safe1").value = "";
      document.getElementById("score1").innerText = "";
      document.getElementById("answer1").innerHTML = "";
    }

    function grade1() {
      const w1 = parseFloat(document.getElementById("dev1-watt").innerText);
      const w2 = parseFloat(document.getElementById("dev2-watt").innerText);
      const c1 = w1 / VOLTAGE, c2 = w2 / VOLTAGE, total = c1 + c2;
      const user1 = parseFloat(document.getElementById("dev1-current").value);
      const user2 = parseFloat(document.getElementById("dev2-current").value);
      const userTotal = parseFloat(document.getElementById("total-current").value);
      const userSafe = document.getElementById("safe1").value;

      let score = 0;
      if (user1?.toFixed(2) == c1.toFixed(2)) score += 2;
      if (user2?.toFixed(2) == c2.toFixed(2)) score += 2;
      if (userTotal?.toFixed(2) == total.toFixed(2)) score++;
      const correctSafety = total <= SAFE_LIMIT ? "safe" : "danger";
      if (userSafe === correctSafety) score++;

      document.getElementById("score1").innerText = `ã‚ãªãŸã®å¾—ç‚¹ï¼š${score} / 6ç‚¹`;
      document.getElementById("answer1").innerHTML = `
        <p><strong>æ­£è§£</strong></p>
        <ul>
          <li>${document.getElementById("dev1-name").innerText} = ${c1.toFixed(2)}A</li>
          <li>${document.getElementById("dev2-name").innerText} = ${c2.toFixed(2)}A</li>
        </ul>
        <p>åˆè¨ˆ = ${total.toFixed(2)}Aï¼ˆ15Aã¾ã§ï¼‰<br>${
          total <= SAFE_LIMIT ? '<span class="text-green">å®‰å…¨ãªä½¿ã„æ–¹ã§ã™</span>' : '<span class="text-red">å±é™ºãªä½¿ã„æ–¹ã§ã™ï¼</span>'
        }</p>`;
    }

    // ========= ç·´ç¿’å•é¡Œ2 =========
    function regenerate2() {
      const d = [...allDevices].sort(() => Math.random() - 0.5).slice(0, 3);
      const area = document.getElementById("dev-area2");
      area.innerHTML = "";
      d.forEach((item, i) => {
        area.innerHTML += `
          <div class="device">
            <img src="${deviceImages[item.name]}" alt="${item.name}">
            <div>${item.name}</div>
            <div>${item.watt}</div>
            <input type="number" id="curr-${i}" step="0.01" placeholder="A">
          </div>`;
      });
      area.dataset.devices = JSON.stringify(d);
      document.getElementById("total-current2").value = "";
      document.getElementById("safe2").value = "";
      document.getElementById("score2").innerText = "";
      document.getElementById("answer2").innerHTML = "";
    }

    function grade2() {
      const devices = JSON.parse(document.getElementById("dev-area2").dataset.devices);
      const correctCurrents = devices.map(d => d.watt / VOLTAGE);
      const totalCorrect = correctCurrents.reduce((a,b)=>a+b,0);
      const userTotal = parseFloat(document.getElementById("total-current2").value);
      const userSafety = document.getElementById("safe2").value;

      let score = 0;
      let feedback = "<p><strong>æ­£è§£ï¼ˆå‚è€ƒï¼‰</strong></p><ul>";

      devices.forEach((d, i) => {
        const userVal = parseFloat(document.getElementById(`curr-${i}`).value);
        const isCorrect = !isNaN(userVal) && userVal.toFixed(2) == correctCurrents[i].toFixed(2);
        if (isCorrect) score += 2;
        feedback += `<li>${d.name} = ${correctCurrents[i].toFixed(2)}A ${isCorrect ? "âœ…" : "âŒ"}</li>`;
      });
      feedback += "</ul>";

      if (!isNaN(userTotal) && userTotal.toFixed(2) == totalCorrect.toFixed(2)) score++;
      const correctSafety = totalCorrect <= SAFE_LIMIT ? "safe" : "danger";
      if (userSafety === correctSafety) score++;

      document.getElementById("score2").innerText = `ã‚ãªãŸã®å¾—ç‚¹ï¼š${score} / 8ç‚¹`;
      feedback += `<p>åˆè¨ˆ = ${totalCorrect.toFixed(2)}Aï¼ˆ15Aã¾ã§ï¼‰<br>${
        totalCorrect <= SAFE_LIMIT
          ? '<span class="text-green">å®‰å…¨ãªä½¿ã„æ–¹ã§ã™</span>'
          : '<span class="text-red">å±é™ºãªä½¿ã„æ–¹ã§ã™ï¼</span>'
      }</p>`;
      document.getElementById("answer2").innerHTML = feedback;
    }

    regenerate1();
    regenerate2();
  </script>
</body>
</html>

